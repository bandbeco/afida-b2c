<%= form_with(model: [:admin, redirect], local: true) do |form| %>
  <% if redirect.errors.any? %>
    <div class="alert alert-error mb-4">
      <h3 class="font-bold">Errors:</h3>
      <ul>
        <% redirect.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="space-y-4">
    <div class="form-control">
      <%= form.label :legacy_path, class: "label" %>
      <%= form.text_field :legacy_path, class: "input input-bordered w-full", placeholder: "/product/old-url-pattern" %>
      <label class="label">
        <span class="label-text-alt">Must start with /product/</span>
      </label>
    </div>

    <div class="form-control">
      <%= form.label :target_slug, "Target Product Slug", class: "label" %>
      <%= form.text_field :target_slug, class: "input input-bordered w-full", placeholder: "pizza-box-kraft" %>
      <label class="label">
        <span class="label-text-alt">Product slug from new site</span>
      </label>
    </div>

    <div class="form-control">
      <%= form.label :variant_params, "Variant Parameters (JSON)", class: "label" %>
      <%= form.text_area :variant_params, value: redirect.variant_params.to_json, class: "textarea textarea-bordered w-full", rows: 3, placeholder: '{"size": "12\"", "colour": "Kraft"}' %>
      <label class="label">
        <span class="label-text-alt">JSON object with size, colour, etc.</span>
      </label>
    </div>

    <div class="form-control">
      <label class="label cursor-pointer justify-start gap-2">
        <%= form.check_box :active, class: "checkbox" %>
        <span class="label-text">Active</span>
      </label>
    </div>

    <div class="flex gap-2">
      <%= form.submit class: "btn btn-primary" %>
      <%= link_to "Cancel", admin_legacy_redirects_path, class: "btn btn-ghost" %>
    </div>
  </div>
<% end %>
