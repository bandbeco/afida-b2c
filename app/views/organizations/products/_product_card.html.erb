<div class="product-card card bg-base-100 shadow-xl">
  <%= link_to organizations_product_path(product), class: "block" do %>
    <figure class="aspect-square">
      <% if product.product_photo.attached? %>
        <%= image_tag product.product_photo.variant(resize_to_limit: [400, 400]),
                      alt: product.generated_title,
                      class: "object-cover w-full h-full" %>
      <% else %>
        <div class="bg-base-200 w-full h-full flex items-center justify-center">
          <span class="text-4xl" role="img" aria-label="Product image placeholder">ðŸ“¦</span>
        </div>
      <% end %>
    </figure>
  <% end %>

  <div class="card-body">
    <h2 class="card-title">
      <%= product.generated_title %>
    </h2>

    <div class="space-y-2 text-sm">
      <div class="flex justify-between">
        <span class="text-gray-600">SKU:</span>
        <span><%= product.sku || "N/A" %></span>
      </div>

      <% if product.volume_in_ml.present? %>
        <div class="flex justify-between">
          <span class="text-gray-600">Size:</span>
          <span><%= product.volume_in_ml %>ml</span>
        </div>
      <% end %>

      <div class="flex justify-between">
        <span class="text-gray-600">Price:</span>
        <span>Â£<%= number_with_precision(product.price, precision: 2) %>/unit</span>
      </div>

      <div class="flex justify-between">
        <span class="text-gray-600">Stock:</span>
        <% if product.stock_quantity.to_i > 1000 %>
          <span class="badge badge-success"><%= number_with_delimiter(product.stock_quantity) %> in stock</span>
        <% elsif product.stock_quantity.to_i > 0 && product.stock_quantity.to_i <= 1000 %>
          <span class="badge badge-warning">Low stock (<%= number_with_delimiter(product.stock_quantity) %>)</span>
        <% else %>
          <span class="badge badge-error">Out of stock</span>
        <% end %>
      </div>
    </div>

    <div class="card-actions justify-end mt-4">
      <%= link_to "Reorder", organizations_product_path(product), class: "btn btn-primary" %>
    </div>
  </div>
</div>
