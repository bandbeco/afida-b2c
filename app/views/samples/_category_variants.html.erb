<%# Turbo Frame response showing products for a category %>
<%= turbo_frame_tag category do %>
  <div class="p-6 pt-4 border-t border-base-200">
    <% if products.any? %>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-1">
        <% products.each do |product| %>
          <%
            is_sample_in_cart = sample_product_ids.include?(product.id)
            is_regular_in_cart = regular_product_ids.include?(product.id)
          %>
          <%= render "samples/product_card",
                     product: product,
                     in_cart: is_sample_in_cart || is_regular_in_cart,
                     is_sample_in_cart: is_sample_in_cart,
                     is_regular_in_cart: is_regular_in_cart,
                     at_limit: sample_count >= Cart::SAMPLE_LIMIT %>
        <% end %>
      </div>
    <% else %>
      <p class="text-center text-base-content/70 py-4">
        No samples available in this category.
      </p>
    <% end %>
  </div>
<% end %>
