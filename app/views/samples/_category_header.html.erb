<%# Category header showing name, sample count, and selected count %>
<%# This partial is used both in the full card and for Turbo Stream updates %>
<%
  selected_count ||= 0

  # Count sample-eligible products in this category
  sample_count_in_category = category.products
    .where(sample_eligible: true, active: true)
    .count
%>

<div id="<%= dom_id(category, :sample_header) %>" class="flex items-center gap-4">
  <div class="relative">
    <div class="w-16 h-16 bg-base-200 rounded-lg flex items-center justify-center">
      <%= category_icon_tag(category, class: "w-10 h-10 object-contain") %>
    </div>
    <% if selected_count > 0 %>
      <!-- Selected count badge on image -->
      <div class="absolute -top-2 -right-2 badge badge-success badge-sm shadow">
        <%= selected_count %>
      </div>
    <% end %>
  </div>

  <div>
    <h2 class="text-xl">
      <%= category.name %>
    </h2>
    <p class="text-sm text-base-content/70">
      <%= sample_count_in_category %> sample<%= sample_count_in_category == 1 ? "" : "s" %> available
      <% if selected_count > 0 %>
        <span class="text-success">Â· <%= selected_count %> selected</span>
      <% end %>
    </p>
  </div>
</div>
